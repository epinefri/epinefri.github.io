<!DOCTYPE HTML>
<!--
	Strata by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Fitness tracker case study in R | Daniela Dula</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">

			<div class="inner">
					<style>
						p.ex1 {
						  margin-top: 200px;
						}
						</style>

					

					<p class="ex1"><h1>Fitness tracker case study in R</h1></p>
					<p1>2022-10-30</p1>
				</div>
			</header>

		<!-- Main -->
			<div id="main">

				<!-- One 
					<section id="one">
						<header class="major">
							<h2>Ipsum lorem dolor aliquam ante commodo<br />
							magna sed accumsan arcu neque.</h2>
						</header>
						-->
						
			
			<section id="two">


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Bellabeat is a company that manufactures health-focused smart
devices. The objective of the case study is to analyze smart device data
to gain insight into how consumers are using their smart devices. The
insights will then help guide the marketing strategy for the
company.</p>
<div id="starting-points" class="section level4">
<h4>Starting points:</h4>
<ul>
<li>Investigating data from products with similar functionality</li>
<li>Identify usage trends</li>
<li>Help Bellabeat identify potential weaknesses and inspire ideas on
new functions or products</li>
</ul>
</div>
</div>
<div id="data-sources" class="section level2">
<h2>Data sources</h2>
<ul>
<li>FitBit Fitness Tracker Data
<ul>
<li>The dataset was downloaded from Kaggle (made available by <a href="https://www.kaggle.com/arashnic">Mobius</a>)</li>
<li>The dataset is under CC0: Public Domain licence</li>
<li>The data contains the personal fitness tracker data of thirty Fitbit
users.</li>
<li>Thirty eligible Fitbit users consented to the submission of personal
tracker data, including minute-level output for physical activity, heart
rate, and sleep monitoring. It includes information about daily
activity, steps, and heart rate that can be used to explore users’
habits.</li>
<li>The datasets were generated by collecting the responses to a
distributed survey via Amazon Mechanical Turk between
03.12.2016-05.12.2016.</li>
<li>The dataset consists of 18 .csv files.</li>
</ul></li>
</ul>
</div>
<div id="data-processing" class="section level2">
<h2>Data processing</h2>
<div id="libraries" class="section level4">
<h4>Libraries</h4>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6      ✔ purrr   0.3.5 
## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
## ✔ tidyr   1.2.1      ✔ stringr 1.4.1 
## ✔ readr   2.1.3      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(lubridate)</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;
## 
## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
</div>
<div id="upload-data" class="section level4">
<h4>Upload data</h4>
<p>Selected 7 out of 18 csv files:</p>
<pre class="r"><code>dailyActivity &lt;- read_csv(&quot;data/selected/dailyActivity.csv&quot;,
    show_col_types = FALSE)

heartrate_seconds &lt;- read_csv(&quot;data/selected/heartrate_seconds.csv&quot;,
    show_col_types = FALSE)

sleepDay &lt;- read_csv(&quot;data/selected/sleepDay.csv&quot;, show_col_types = FALSE)

weightLogInfo &lt;- read_csv(&quot;data/selected/weightLogInfo.csv&quot;,
    show_col_types = FALSE)

hrCalories &lt;- read_csv(&quot;data/selected/hourlyCalories_merged.csv&quot;,
    show_col_types = FALSE)

hrIntensity &lt;- read_csv(&quot;data/selected/hourlyIntensities_merged.csv&quot;,
    show_col_types = FALSE)

hrSteps &lt;- read_csv(&quot;data/selected/hourlySteps_merged.csv&quot;, show_col_types = FALSE)</code></pre>
<p>Preview:</p>
<pre class="r"><code>colnames(dailyActivity)</code></pre>
<pre><code>##  [1] &quot;Id&quot;                       &quot;ActivityDate&quot;            
##  [3] &quot;TotalSteps&quot;               &quot;TotalDistance&quot;           
##  [5] &quot;TrackerDistance&quot;          &quot;LoggedActivitiesDistance&quot;
##  [7] &quot;VeryActiveDistance&quot;       &quot;ModeratelyActiveDistance&quot;
##  [9] &quot;LightActiveDistance&quot;      &quot;SedentaryActiveDistance&quot; 
## [11] &quot;VeryActiveMinutes&quot;        &quot;FairlyActiveMinutes&quot;     
## [13] &quot;LightlyActiveMinutes&quot;     &quot;SedentaryMinutes&quot;        
## [15] &quot;Calories&quot;</code></pre>
<pre class="r"><code>colnames(heartrate_seconds)</code></pre>
<pre><code>## [1] &quot;Id&quot;    &quot;Time&quot;  &quot;Value&quot;</code></pre>
<pre class="r"><code>colnames(sleepDay)</code></pre>
<pre><code>## [1] &quot;Id&quot;                 &quot;SleepDay&quot;           &quot;TotalSleepRecords&quot; 
## [4] &quot;TotalMinutesAsleep&quot; &quot;TotalTimeInBed&quot;</code></pre>
<pre class="r"><code>colnames(weightLogInfo)</code></pre>
<pre><code>## [1] &quot;Id&quot;             &quot;Date&quot;           &quot;WeightKg&quot;       &quot;WeightPounds&quot;  
## [5] &quot;Fat&quot;            &quot;BMI&quot;            &quot;IsManualReport&quot; &quot;LogId&quot;</code></pre>
<pre class="r"><code>colnames(hrCalories)</code></pre>
<pre><code>## [1] &quot;Id&quot;           &quot;ActivityHour&quot; &quot;Calories&quot;</code></pre>
<pre class="r"><code>colnames(hrIntensity)</code></pre>
<pre><code>## [1] &quot;Id&quot;               &quot;ActivityHour&quot;     &quot;TotalIntensity&quot;   &quot;AverageIntensity&quot;</code></pre>
<pre class="r"><code>colnames(hrSteps)</code></pre>
<pre><code>## [1] &quot;Id&quot;           &quot;ActivityHour&quot; &quot;StepTotal&quot;</code></pre>
</div>
<div id="data-cleaning" class="section level3">
<h3>Data cleaning</h3>

<h3>1. Checked the number of submitted values from SleepDay table</h3>

<pre class="r"><code>table(sleepDay$Id)</code></pre>
<pre><code>## 
## 1503960366 1644430081 1844505072 1927972279 2026352035 2320127002 2347167796 
##         25          4          3          5         28          1         15 
## 3977333714 4020332650 4319703577 4388161847 4445114986 4558609924 4702921684 
##         28          8         26         24         28          5         28 
## 5553957443 5577150313 6117666160 6775888955 6962181067 7007744171 7086361926 
##         31         26         18          3         31          2         24 
## 8053475328 8378563200 8792009665 
##          3         32         15</code></pre>
<p>15 out of 24 individuals have more than 10 recorded days;</p>
<h3>2. Created a new table to only use data from those 15 users: </h3>
  <li> Created a
table containing only ids of users with more than 10 entries</li>
<pre class="r"><code>SleepSummaryIds &lt;- sleepDay %&gt;%
    group_by(Id) %&gt;%
    count(unique(&quot;Id&quot;), sort = TRUE) %&gt;%
    filter(n &gt; 10)

as_tibble(SleepSummaryIds)</code></pre>
<pre><code>## # A tibble: 15 × 3
##            Id `unique(&quot;Id&quot;)`     n
##         &lt;dbl&gt; &lt;chr&gt;          &lt;int&gt;
##  1 8378563200 Id                32
##  2 5553957443 Id                31
##  3 6962181067 Id                31
##  4 2026352035 Id                28
##  5 3977333714 Id                28
##  6 4445114986 Id                28
##  7 4702921684 Id                28
##  8 4319703577 Id                26
##  9 5577150313 Id                26
## 10 1503960366 Id                25
## 11 4388161847 Id                24
## 12 7086361926 Id                24
## 13 6117666160 Id                18
## 14 2347167796 Id                15
## 15 8792009665 Id                15</code></pre>
<li> Joined the ids table with the sleepDay table:</li>
<pre class="r"><code>SleepFiltered &lt;- sleepDay %&gt;%
    right_join(SleepSummaryIds, by = &quot;Id&quot;)
as_tibble(SleepFiltered)</code></pre>
<pre><code>## # A tibble: 379 × 7
##            Id SleepDay              TotalSleepRe…¹ Total…² Total…³ uniqu…⁴     n
##         &lt;dbl&gt; &lt;chr&gt;                          &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt;
##  1 1503960366 4/12/2016 12:00:00 AM              1     327     346 Id         25
##  2 1503960366 4/13/2016 12:00:00 AM              2     384     407 Id         25
##  3 1503960366 4/15/2016 12:00:00 AM              1     412     442 Id         25
##  4 1503960366 4/16/2016 12:00:00 AM              2     340     367 Id         25
##  5 1503960366 4/17/2016 12:00:00 AM              1     700     712 Id         25
##  6 1503960366 4/19/2016 12:00:00 AM              1     304     320 Id         25
##  7 1503960366 4/20/2016 12:00:00 AM              1     360     377 Id         25
##  8 1503960366 4/21/2016 12:00:00 AM              1     325     364 Id         25
##  9 1503960366 4/23/2016 12:00:00 AM              1     361     384 Id         25
## 10 1503960366 4/24/2016 12:00:00 AM              1     430     449 Id         25
## # … with 369 more rows, and abbreviated variable names ¹​TotalSleepRecords,
## #   ²​TotalMinutesAsleep, ³​TotalTimeInBed, ⁴​`unique(&quot;Id&quot;)`</code></pre>
<ul>
<h3>3. Checked the weightLogInfo number of inputs:</h3>
</ul>
<pre class="r"><code>table(weightLogInfo$Id)</code></pre>
<pre><code>## 
## 1503960366 1927972279 2873212765 4319703577 4558609924 5577150313 6962181067 
##          2          1          2          2          5          1         30 
## 8877689391 
##         24</code></pre>
<ul>
<li><p>Only 8 users submitted weight data, and only 2 of them have more
than 5 entries.</p></li>
<li><p>Add a Date column to SleepFiltered and dailyActivity</p></li>
</ul>
<pre class="r"><code># SleepFiltered
SleepFiltered$SleepDay &lt;- mdy_hms(SleepFiltered$SleepDay)
SleepFiltered$Date &lt;- as_date(SleepFiltered$SleepDay)

# dailyActivity
dailyActivity$ActivityDate &lt;- mdy(dailyActivity$ActivityDate)
dailyActivity$Date &lt;- as_date(dailyActivity$ActivityDate)</code></pre>

<h3>4. Add a hour column to hrIntensity, hrCalories, hrSteps</h3>

<pre class="r"><code># hrIntensity
hrIntensity$ActivityHour &lt;- mdy_hms(hrIntensity$ActivityHour)
hrIntensity$Hour &lt;- hms::as_hms(hrIntensity$ActivityHour)

# hrCalories
hrCalories$ActivityHour &lt;- mdy_hms(hrCalories$ActivityHour)
hrCalories$Hour &lt;- hms::as_hms(hrCalories$ActivityHour)

# hrSteps
hrSteps$ActivityHour &lt;- mdy_hms(hrSteps$ActivityHour)
hrSteps$Hour &lt;- hms::as_hms(hrSteps$ActivityHour)</code></pre>
</div>
</div>
<div id="data-analysis" class="section level2">
<h2>Data analysis</h2>
<h3>1. Created new data frames to summarize average values for each Id:</h3>
<ul>
<li>Activity Summary: mean total steps, distance, sedentary minutes and
calories for each Id</li>
</ul>
<pre class="r"><code>ActivitySummary &lt;- dailyActivity %&gt;%
    group_by(Id) %&gt;%
    summarize(meanTotalSteps = mean(TotalSteps), meanTotalDistance = mean(TotalDistance),
        meanSedentaryMinutes = mean(SedentaryMinutes), meanCalories = mean(Calories))</code></pre>
<ul>
<li>Heart rate summary: mean, min, max, median value of heart rate</li>
</ul>
<pre class="r"><code>HeartrateSummary &lt;- heartrate_seconds %&gt;%
    group_by(Id) %&gt;%
    summarize(meanBPM = mean(Value), minBPM = min(Value), maxBPM = max(Value),
        medBPM = median(Value))</code></pre>
<ul>
<li>Sleep summary: average minutes of sleep, average time spent in
bed</li>
</ul>
<pre class="r"><code>SleepSummary &lt;- SleepFiltered %&gt;%
    group_by(Id) %&gt;%
    summarize(meanSleepTime = mean(TotalMinutesAsleep), meanTimeInBed = mean(TotalTimeInBed))</code></pre>
<ul>
<li>Weight summary: average weight, BMI</li>
</ul>
<pre class="r"><code>WeightSummary &lt;- weightLogInfo %&gt;%
    group_by(Id) %&gt;%
    summarize(meanWeightKg = mean(WeightKg), meanBMI = mean(BMI))</code></pre>
<h3>2. Merged tables, resulting in a table that summarizes data for each person.</h3>
<pre class="r"><code>Summary &lt;- ActivitySummary %&gt;%
    left_join(HeartrateSummary, by = &quot;Id&quot;) %&gt;%
    left_join(SleepSummary, by = &quot;Id&quot;) %&gt;%
    left_join(WeightSummary, by = &quot;Id&quot;)

as_tibble(Summary)</code></pre>
<pre><code>## # A tibble: 33 × 13
##          Id meanT…¹ meanT…² meanS…³ meanC…⁴ meanBPM minBPM maxBPM medBPM meanS…⁵
##       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
##  1   1.50e9  12117.   7.81     848.   1816.    NA       NA     NA     NA    360.
##  2   1.62e9   5744.   3.91    1258.   1483.    NA       NA     NA     NA     NA 
##  3   1.64e9   7283.   5.30    1162.   2811.    NA       NA     NA     NA     NA 
##  4   1.84e9   2580.   1.71    1207.   1573.    NA       NA     NA     NA     NA 
##  5   1.93e9    916.   0.635   1317.   2173.    NA       NA     NA     NA     NA 
##  6   2.02e9  11371.   8.08    1113.   2510.    80.2     38    203     76     NA 
##  7   2.03e9   5567.   3.45     689.   1541.    93.8     63    125     95    506.
##  8   2.32e9   4717.   3.19    1220.   1724.    NA       NA     NA     NA     NA 
##  9   2.35e9   9520.   6.36     687.   2043.    76.7     49    195     73    447.
## 10   2.87e9   7556.   5.10    1097.   1917.    NA       NA     NA     NA     NA 
## # … with 23 more rows, 3 more variables: meanTimeInBed &lt;dbl&gt;,
## #   meanWeightKg &lt;dbl&gt;, meanBMI &lt;dbl&gt;, and abbreviated variable names
## #   ¹​meanTotalSteps, ²​meanTotalDistance, ³​meanSedentaryMinutes, ⁴​meanCalories,
## #   ⁵​meanSleepTime</code></pre>
<h3>3. Removed unnecessary columns</h3>
<pre class="r"><code>remove(ActivitySummary)
remove(HeartrateSummary)
remove(SleepSummary)
remove(SleepSummaryIds)
remove(WeightSummary)</code></pre>

<h3>Observations:</h3>

<li>Activity data was collected for 33 individual ids (although the
number of participants is said to be thirty)</li>
<li>Heart rate data was collected for 14 individuals</li>
<li>Sleep data was collected for 24 individuals, of which 15 were
selected for analysis (having more than 10 unique entries)</li>
<li>Weight data was collected for 8 individuals. Not enough entries per
individual to analyse weight loss or BMI changes. Also, the table
contains only two entries of fat percentage, insufficient for
analysis</li>
</ul></li>
</ul>
</div>
<div id="visualization" class="section level2">
<br />
<h2>Visualization</h2>
<pre class="r"><code>dailyActivity %&gt;%
    ggplot(mapping = aes(x = TotalSteps, y = Calories)) + geom_point() + geom_smooth(method = lm, se = FALSE) + 
    labs(title = &quot;Total number of steps and calories burned&quot;, subtitle = &quot;The more steps a person takes, the more calories they burn.&quot;,
    x = &quot;Total steps&quot;)

    ## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre> 
    <img src="images/bellav1.png" alt="" />

    <pre class="r"><code>hrCalories %&gt;% 
      inner_join(hrIntensity, by = c(&quot;Id&quot;, &quot;ActivityHour&quot;)) %&gt;% 
      ggplot(mapping = aes(x = AverageIntensity, y = Calories)) + geom_point() + geom_smooth(method=lm, se=FALSE) + labs(title = &quot;The average activity intensity and calories&quot;, subtitle = &quot;Higher activity levels corelate with more calories burnt.&quot;, x = &quot;Average intensity&quot;)## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
  <img src="images/bellav2.png" alt="" />

  <pre class="r"><code>dailyActivity %&gt;%
    inner_join(SleepFiltered, by = c(&quot;Id&quot;, &quot;Date&quot;)) %&gt;%
    ggplot(mapping = aes(x = SedentaryMinutes, y = TotalMinutesAsleep)) +
    geom_point() + geom_smooth(method = lm, se = FALSE) + labs(title = &quot;Sedentary time and duration of sleep&quot;,
    subtitle = &quot;Sedentarism negatively impacts the quantity of sleep.&quot;,
    x = &quot;Total sedentary minutes&quot;, y = &quot;Total minutes asleep&quot;)
    
    ## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<img src="images/bellav3.png" alt="" />


<pre class="r"><code>hrIntensity %&gt;%
    ggplot(mapping = aes(x = as.character(Hour), y = AverageIntensity)) +
    geom_histogram(stat = &quot;identity&quot;, fill = &quot;darkblue&quot;, bin = 1) +
    theme(axis.text.x = element_text(angle = 90)) + labs(title = &quot;Activity intensity by the hour&quot;,
    subtitle = &quot;The activity levels peek around lunchtime and around 17-19:00, probably after work.&quot;,
    x = &quot; &quot;, y = &quot;Average activity intensity&quot;)
    
    ## Warning: Ignoring unknown parameters: binwidth, bins, pad, bin</code></pre>
<img src="images/bellav4.png" alt="" />

</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>


						
				</section>
				


			</div>

		<!-- Footer -->
			<footer id="footer">
				<div class="inner">
					<ul class="icons">
						<a href="http://epinefri.github.io/"> < Homepage</a></h1></p>

						<li><a href="https://github.com/epinefri" class="icon brands fa-github"><span class="label">Github</span></a></li>
						<li><a href="https://www.linkedin.com/in/danieladula/" class="icon brands fa-linkedin"><span class="label">LinkedIn</span></a></li>
						<li><a href="mailto:danielasorinadula@gmail.com" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; Daniela Dula</li><li>Template: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.poptrox.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>